describe("matchHeight",function(){beforeEach(function(){jasmine.addMatchers({toBeWithinTolerance:function(){return{compare:function(e,t,i){return 0!==i&&(i=i||1),{pass:Math.abs(t-e)<=i}}}}})}),it("has been defined",function(e){var t=$.fn.matchHeight;expect(typeof t).toBe("function"),expect(testHelper.isArray(t._groups)).toBe(!0),expect(typeof t._throttle).toBe("number"),expect(typeof t._maintainScroll).toBe("boolean"),expect(typeof t._rows).toBe("function"),expect(typeof t._apply).toBe("function"),expect(typeof t._applyDataApi).toBe("function"),expect(typeof t._update).toBe("function"),e()}),it("has matched heights automatically after images load",function(e){var t=$(".image-items"),i=testHelper.getCurrentBreakpoint(),n=t.find(".item-0").outerHeight(),o=t.find(".item-1").outerHeight(),a=t.find(".item-2").outerHeight(),r=t.find(".item-3").outerHeight();"mobile"===i||("tablet"===i?(expect(n).toBeWithinTolerance(o),expect(a).toBeWithinTolerance(r)):"desktop"===i&&(expect(n).toBeWithinTolerance(r),expect(o).toBeWithinTolerance(r),expect(a).toBeWithinTolerance(r))),e()}),it("has found rows correctly",function(e){var t=$(".simple-items").children(".item"),i=$.fn.matchHeight._rows(t),n=testHelper.getCurrentBreakpoint(),o=4,a=2;testHelper.isMediaQueriesSupported&&("mobile"===n?(o=1,a=8):"tablet"===n&&(o=2,a=4)),expect(i.length).toBe(a),$.each(i,function(e,t){expect(t.length).toBe(o),t.each(function(t,i){expect($(i).hasClass("item-"+(e*o+t))).toBe(!0)})}),e()}),it("has matched heights when byRow true",function(e){expect(-1.0001).not.toBeWithinTolerance(0),expect(-1).toBeWithinTolerance(0),expect(-.1).toBeWithinTolerance(0),expect(0).toBeWithinTolerance(0),expect(.1).toBeWithinTolerance(0),expect(1).toBeWithinTolerance(0),expect(1.0001).not.toBeWithinTolerance(0),$(".simple-items, .image-items, .nested-items-parent, .nested-items,.fixed-items, .inline-block-items, .inline-flex-items, .items-with-float").each(function(){var e=$(this).children(".item"),t=$.fn.matchHeight._rows(e);$.each(t,function(e,t){var i=t.first().outerHeight(),n=0;t.each(function(){var e=$(this),t=e.css("height"),o=e.outerHeight();e.css("height","");var a=e.outerHeight();e.css("height",t),expect(o).toBeWithinTolerance(i),a>n&&(n=a)}),expect(i).toBeWithinTolerance(n)})}),e()}),it("has matched heights when byRow false",function(e){$.each($.fn.matchHeight._groups,function(){this.options._oldByRow=this.options.byRow,this.options.byRow=!1}),$.fn.matchHeight._update(),$(".simple-items, .image-items,.fixed-items, .inline-block-items, .inline-flex-items, .items-with-float").each(function(){var e=$(this).children(".item"),t=e.first().outerHeight(),i=0;e.each(function(){var e=$(this),n=e.css("height"),o=e.outerHeight();e.css("height","");var a=e.outerHeight();e.css("height",n),expect(o).toBeWithinTolerance(t),a>i&&(i=a)}),expect(t).toBeWithinTolerance(i)}),$.each($.fn.matchHeight._groups,function(){this.options.byRow=this.options._oldByRow,delete this.options._oldByRow}),$.fn.matchHeight._update(),e()}),it("has matched heights for hidden items",function(e){$("body").removeClass("test-hidden"),$(".hidden-items .item-2 .items-container, .hidden-items .item-3 .items-container").each(function(){var e=$(this).children(".item"),t=$.fn.matchHeight._rows(e);$.each(t,function(e,t){var i=t.first().outerHeight(),n=0;t.each(function(){var e=$(this),t=e.css("height"),o=e.outerHeight();e.css("height","");var a=e.outerHeight();e.css("height",t),expect(o).toBeWithinTolerance(i),a>n&&(n=a)}),expect(i).toBeWithinTolerance(n)})}),$("body").addClass("test-hidden"),e()}),it("has matched heights when using data api",function(e){var t=$(".data-api-items"),i=testHelper.getCurrentBreakpoint(),n=t.find(".item-0").outerHeight(),o=t.find(".item-1").outerHeight(),a=t.find(".item-2").outerHeight(),r=t.find(".item-3").outerHeight();"mobile"!==i&&(expect(n).toBeWithinTolerance(o),expect(a).toBeWithinTolerance(r),expect(n).not.toBeWithinTolerance(a),expect(o).not.toBeWithinTolerance(r)),e()}),it("has matched heights when using target option",function(e){var t=$(".target-items"),i=t.find(".item-0").outerHeight(),n=t.find(".item-1").outerHeight(),o=t.find(".item-2").outerHeight(),a=t.find(".item-3").outerHeight();expect(i).toBeWithinTolerance(n),expect(o).toBeWithinTolerance(n),expect(a).toBeWithinTolerance(n),e()}),it("can manually update heights and fires global callbacks",function(e){var t=testHelper.getCurrentBreakpoint(),i=!1,n=!1,o=$.fn.matchHeight._beforeUpdate,a=$.fn.matchHeight._afterUpdate;$.fn.matchHeight._beforeUpdate=function(){i=!0},$.fn.matchHeight._afterUpdate=function(){n=!0},$(".simple-items .item-1").append("<p>Test content update.</p>"),$.fn.matchHeight._update(),"mobile"===t||$(".simple-items").each(function(){var e=$(this).children(".item"),t=$.fn.matchHeight._rows(e);$.each(t,function(e,t){var i=t.first().outerHeight(),n=0;t.each(function(){var e=$(this),t=e.css("height"),o=e.outerHeight();e.css("height","");var a=e.outerHeight();e.css("height",t),expect(o).toBeWithinTolerance(i),a>n&&(n=a)}),expect(i).toBeWithinTolerance(n)})}),expect(i).toBe(!0),expect(n).toBe(!0),$.fn.matchHeight._beforeUpdate=o,$.fn.matchHeight._afterUpdate=a,e()}),it("parses numbers and NaN",function(e){var t=$.fn.matchHeight._parse;expect(t(1)).toBe(1),expect(t(1.1)).toBe(1.1),expect(t("1")).toBe(1),expect(t("1.1")).toBe(1.1),expect(t(NaN)).toBe(0),e()}),it("parses options",function(e){var t=$.fn.matchHeight._parseOptions,i={byRow:!0,property:"height",target:null,remove:!1};expect(t()).toEqual(i),expect(t({byRow:!1,property:"min-height",target:null,remove:!0})).toEqual({byRow:!1,property:"min-height",target:null,remove:!0}),expect(t("remove")).toEqual({byRow:i.byRow,property:i.property,target:i.target,remove:!0}),expect(t(!0)).toEqual({byRow:!0,property:i.property,target:i.target,remove:i.remove}),expect(t(!1)).toEqual({byRow:!1,property:i.property,target:i.target,remove:i.remove}),e()})}),jasmine.getEnv().addReporter({suiteStarted:function(){window.specsPassed=[],window.specsFailed=[],$(".test-summary").text("running tests...")},specDone:function(e){"passed"===e.status?window.specsPassed.push(e.id):window.specsFailed.push(e.id)},suiteDone:function(){$(".test-summary").toggleClass("has-passed",0===window.specsFailed.length).toggleClass("has-failed",0!==window.specsFailed.length).text(window.specsPassed.length+" tests passed, "+window.specsFailed.length+" failed")}});var testHelper={isMediaQueriesSupported:"undefined"!=typeof(window.matchMedia||window.msMatchMedia)||navigator.userAgent.indexOf("MSIE 9.0")>=0,isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},getCurrentBreakpoint:function(){if(testHelper.isMediaQueriesSupported){var e=$(window).width();if(e<=640)return"mobile";if(e<=1024)return"tablet"}return"desktop"}};